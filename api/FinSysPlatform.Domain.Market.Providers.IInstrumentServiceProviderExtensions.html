<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
      <title>Class IInstrumentServiceProviderExtensions | FinScript </title>
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta name="title" content="Class IInstrumentServiceProviderExtensions | FinScript ">
      
      <meta name="description" content="Extension methods for">
      <link rel="icon" href="../favicon.ico">
      <link rel="stylesheet" href="../public/docfx.min.css">
      <link rel="stylesheet" href="../public/main.css">
      <meta name="docfx:navrel" content="../toc.html">
      <meta name="docfx:tocrel" content="toc.html">
      
      <meta name="docfx:rel" content="../">
      
      
      
      <meta name="loc:inThisArticle" content="In this article">
      <meta name="loc:searchResultsCount" content="{count} results for &quot;{query}&quot;">
      <meta name="loc:searchNoResults" content="No results for &quot;{query}&quot;">
      <meta name="loc:tocFilter" content="Filter by title">
      <meta name="loc:nextArticle" content="Next">
      <meta name="loc:prevArticle" content="Previous">
      <meta name="loc:themeLight" content="Light">
      <meta name="loc:themeDark" content="Dark">
      <meta name="loc:themeAuto" content="Auto">
      <meta name="loc:changeTheme" content="Change theme">
      <meta name="loc:copy" content="Copy">
      <meta name="loc:downloadPdf" content="Download PDF">

      <script type="module" src="./../public/docfx.min.js"></script>

      <script>
        const theme = localStorage.getItem('theme') || 'auto'
        document.documentElement.setAttribute('data-bs-theme', theme === 'auto' ? (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light') : theme)
      </script>

  </head>

  <body class="tex2jax_ignore" data-layout="" data-yaml-mime="ManagedReference">
    <header class="bg-body border-bottom">
      <nav id="autocollapse" class="navbar navbar-expand-md" role="navigation">
        <div class="container-xxl flex-nowrap">
          <a class="navbar-brand" href="../index.html">
            <img id="logo" class="svg" src="../logo.svg" alt="FinScript">
            FinScript
          </a>
          <button class="btn btn-lg d-md-none border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navpanel" aria-controls="navpanel" aria-expanded="false" aria-label="Toggle navigation">
            <i class="bi bi-three-dots"></i>
          </button>
          <div class="collapse navbar-collapse" id="navpanel">
            <div id="navbar">
              <form class="search" role="search" id="search">
                <i class="bi bi-search"></i>
                <input class="form-control" id="search-query" type="search" disabled placeholder="Search" autocomplete="off" aria-label="Search">
              </form>
            </div>
          </div>
        </div>
      </nav>
    </header>

    <main class="container-xxl">
      <div class="toc-offcanvas">
        <div class="offcanvas-md offcanvas-start" tabindex="-1" id="tocOffcanvas" aria-labelledby="tocOffcanvasLabel">
          <div class="offcanvas-header">
            <h5 class="offcanvas-title" id="tocOffcanvasLabel">Table of Contents</h5>
            <button type="button" class="btn-close" data-bs-dismiss="offcanvas" data-bs-target="#tocOffcanvas" aria-label="Close"></button>
          </div>
          <div class="offcanvas-body">
            <nav class="toc" id="toc"></nav>
          </div>
        </div>
      </div>

      <div class="content">
        <div class="actionbar">
          <button class="btn btn-lg border-0 d-md-none" type="button" data-bs-toggle="offcanvas" data-bs-target="#tocOffcanvas" aria-controls="tocOffcanvas" aria-expanded="false" aria-label="Show table of contents">
            <i class="bi bi-list"></i>
          </button>

          <nav id="breadcrumb"></nav>
        </div>

        <article data-uid="FinSysPlatform.Domain.Market.Providers.IInstrumentServiceProviderExtensions">



  <h1 id="FinSysPlatform_Domain_Market_Providers_IInstrumentServiceProviderExtensions" data-uid="FinSysPlatform.Domain.Market.Providers.IInstrumentServiceProviderExtensions" class="text-break">
Class IInstrumentServiceProviderExtensions  <a class="header-action link-secondary" title="View source" href="https://bitbucket.org/fintechnology/finalgo-charts/src/development/src/FinSysPlatform.Domain.Market/Providers/IInstrumentServiceProviderExtensions.cs#lines-15"><i class="bi bi-code-slash"></i></a>
  </h1>

  <div class="facts text-secondary">
    <dl><dt>Namespace</dt><dd><a class="xref" href="FinSysPlatform.html">FinSysPlatform</a>.<a class="xref" href="FinSysPlatform.Domain.html">Domain</a>.<a class="xref" href="FinSysPlatform.Domain.Market.html">Market</a>.<a class="xref" href="FinSysPlatform.Domain.Market.Providers.html">Providers</a></dd></dl>
  <dl><dt>Assembly</dt><dd>FinSysPlatform.Domain.Market.dll</dd></dl>
  </div>

  <div class="markdown summary"><p>Extension methods for <a class="xref" href="FinSysPlatform.Domain.Market.Providers.IInstrumentServiceProvider.html">IInstrumentServiceProvider</a></p>
</div>
  <div class="markdown conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public static class IInstrumentServiceProviderExtensions</code></pre>
  </div>




  <dl class="typelist inheritance">
    <dt>Inheritance</dt>
    <dd>
      <div><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object">object</a></div>
      <div><span class="xref">IInstrumentServiceProviderExtensions</span></div>
    </dd>
  </dl>



  <dl class="typelist inheritedMembers">
    <dt>Inherited Members</dt>
    <dd>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.equals#system-object-equals(system-object)">object.Equals(object)</a>
    </div>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.equals#system-object-equals(system-object-system-object)">object.Equals(object, object)</a>
    </div>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.gethashcode">object.GetHashCode()</a>
    </div>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.gettype">object.GetType()</a>
    </div>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.memberwiseclone">object.MemberwiseClone()</a>
    </div>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.referenceequals">object.ReferenceEquals(object, object)</a>
    </div>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.tostring">object.ToString()</a>
    </div>
  </dd></dl>






  <h2 class="section" id="methods">Methods
</h2>


  <a id="FinSysPlatform_Domain_Market_Providers_IInstrumentServiceProviderExtensions_FindServerInstrumentsToBuildConversionRouteAsync_" data-uid="FinSysPlatform.Domain.Market.Providers.IInstrumentServiceProviderExtensions.FindServerInstrumentsToBuildConversionRouteAsync*"></a>

  <h3 id="FinSysPlatform_Domain_Market_Providers_IInstrumentServiceProviderExtensions_FindServerInstrumentsToBuildConversionRouteAsync_FinSysPlatform_Domain_Market_Providers_IInstrumentServiceProvider_System_Boolean_System_String_System_String_" data-uid="FinSysPlatform.Domain.Market.Providers.IInstrumentServiceProviderExtensions.FindServerInstrumentsToBuildConversionRouteAsync(FinSysPlatform.Domain.Market.Providers.IInstrumentServiceProvider,System.Boolean,System.String,System.String)">
  FindServerInstrumentsToBuildConversionRouteAsync(IInstrumentServiceProvider, bool, string, string)
  <a class="header-action link-secondary" title="View source" href="https://bitbucket.org/fintechnology/finalgo-charts/src/development/src/FinSysPlatform.Domain.Market/Providers/IInstrumentServiceProviderExtensions.cs#lines-83"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Finds/downloads a list of server instruments that can be used to build a route for conversion rate from <code class="paramref">fromAsset</code> to <code class="paramref">toAsset</code></p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public static Task&lt;IReadOnlyList&lt;IServerInstrument&gt;?&gt; FindServerInstrumentsToBuildConversionRouteAsync(this IInstrumentServiceProvider instrumentServiceProvider, bool isCrypto, string fromAsset, string toAsset)</code></pre>
  </div>

  <h4 class="section">Parameters</h4>
  <dl class="parameters">
    <dt><code>instrumentServiceProvider</code> <a class="xref" href="FinSysPlatform.Domain.Market.Providers.IInstrumentServiceProvider.html">IInstrumentServiceProvider</a></dt>
    <dd><p>Instrument provider</p>
</dd>
    <dt><code>isCrypto</code> <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.boolean">bool</a></dt>
    <dd><p>Flag whether we find a route for instrument from crypto market</p>
</dd>
    <dt><code>fromAsset</code> <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.string">string</a></dt>
    <dd><p>The currency to convert from</p>
</dd>
    <dt><code>toAsset</code> <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.string">string</a></dt>
    <dd><p>Target currency to convert to</p>
</dd>
  </dl>

  <h4 class="section">Returns</h4>
  <dl class="parameters">
    <dt><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.threading.tasks.task-1">Task</a>&lt;<a class="xref" href="https://learn.microsoft.com/dotnet/api/system.collections.generic.ireadonlylist-1">IReadOnlyList</a>&lt;<a class="xref" href="FinSysPlatform.Domain.Market.Providers.IServerInstrument.html">IServerInstrument</a>&gt;&gt;</dt>
    <dd></dd>
  </dl>






  <h4 class="section" id="FinSysPlatform_Domain_Market_Providers_IInstrumentServiceProviderExtensions_FindServerInstrumentsToBuildConversionRouteAsync_FinSysPlatform_Domain_Market_Providers_IInstrumentServiceProvider_System_Boolean_System_String_System_String__examples">Examples</h4>
  <p>Input instrument: EUR/USD
Target currency: GBP
Possible result: EUR/GBP, GBP/USD</p>


  <h4 class="section" id="FinSysPlatform_Domain_Market_Providers_IInstrumentServiceProviderExtensions_FindServerInstrumentsToBuildConversionRouteAsync_FinSysPlatform_Domain_Market_Providers_IInstrumentServiceProvider_System_Boolean_System_String_System_String__remarks">Remarks</h4>
  <div class="markdown level1 remarks"><p>The method tries to find each instrument on server (it loads the instrument from server), so, the method may work for rather long time.
The method DOES NOT search through local instruments, you need to check local instruments on your own before calling this method.
<code class="paramref">isCrypto</code> defines what &quot;universal currency&quot; should be used in attempt to link specified assets. For crypto markets this is USDT, for other markets this is USD</p>
</div>




  <a id="FinSysPlatform_Domain_Market_Providers_IInstrumentServiceProviderExtensions_GetInstrumentAssets_" data-uid="FinSysPlatform.Domain.Market.Providers.IInstrumentServiceProviderExtensions.GetInstrumentAssets*"></a>

  <h3 id="FinSysPlatform_Domain_Market_Providers_IInstrumentServiceProviderExtensions_GetInstrumentAssets_FinSysPlatform_Domain_Market_Providers_IInstrumentServiceProvider_FinSysPlatform_Domain_Market_Instrument_System_String__System_String__" data-uid="FinSysPlatform.Domain.Market.Providers.IInstrumentServiceProviderExtensions.GetInstrumentAssets(FinSysPlatform.Domain.Market.Providers.IInstrumentServiceProvider,FinSysPlatform.Domain.Market.Instrument,System.String@,System.String@)">
  GetInstrumentAssets(IInstrumentServiceProvider, Instrument, out string?, out string?)
  <a class="header-action link-secondary" title="View source" href="https://bitbucket.org/fintechnology/finalgo-charts/src/development/src/FinSysPlatform.Domain.Market/Providers/IInstrumentServiceProviderExtensions.cs#lines-60"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>A wrapper for <a class="xref" href="FinSysPlatform.Domain.Market.Providers.IInstrumentServiceProvider.html#FinSysPlatform_Domain_Market_Providers_IInstrumentServiceProvider_GetInstrumentAssets_FinSysPlatform_Domain_Market_InstrumentKey_System_String__System_String__">GetInstrumentAssets(InstrumentKey, out string?, out string?)</a></p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public static bool GetInstrumentAssets(this IInstrumentServiceProvider me, Instrument instrument, out string? currency1, out string? currency2)</code></pre>
  </div>

  <h4 class="section">Parameters</h4>
  <dl class="parameters">
    <dt><code>me</code> <a class="xref" href="FinSysPlatform.Domain.Market.Providers.IInstrumentServiceProvider.html">IInstrumentServiceProvider</a></dt>
    <dd></dd>
    <dt><code>instrument</code> <a class="xref" href="FinSysPlatform.Domain.Market.Instrument.html">Instrument</a></dt>
    <dd></dd>
    <dt><code>currency1</code> <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.string">string</a></dt>
    <dd></dd>
    <dt><code>currency2</code> <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.string">string</a></dt>
    <dd></dd>
  </dl>

  <h4 class="section">Returns</h4>
  <dl class="parameters">
    <dt><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.boolean">bool</a></dt>
    <dd></dd>
  </dl>











  <a id="FinSysPlatform_Domain_Market_Providers_IInstrumentServiceProviderExtensions_GetInstrumentAssets_" data-uid="FinSysPlatform.Domain.Market.Providers.IInstrumentServiceProviderExtensions.GetInstrumentAssets*"></a>

  <h3 id="FinSysPlatform_Domain_Market_Providers_IInstrumentServiceProviderExtensions_GetInstrumentAssets_FinSysPlatform_Domain_Market_Providers_IInstrumentServiceProvider_System_Collections_Generic_IEnumerable_FinSysPlatform_Domain_Market_Instrument__" data-uid="FinSysPlatform.Domain.Market.Providers.IInstrumentServiceProviderExtensions.GetInstrumentAssets(FinSysPlatform.Domain.Market.Providers.IInstrumentServiceProvider,System.Collections.Generic.IEnumerable{FinSysPlatform.Domain.Market.Instrument})">
  GetInstrumentAssets(IInstrumentServiceProvider, IEnumerable&lt;Instrument&gt;)
  <a class="header-action link-secondary" title="View source" href="https://bitbucket.org/fintechnology/finalgo-charts/src/development/src/FinSysPlatform.Domain.Market/Providers/IInstrumentServiceProviderExtensions.cs#lines-43"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Returns a assets (participants) for the specified instruments. For example EUR/USD has assets: EUR vs USD
For non-forex instruments, a second asset is a base currency. For example, for AAPL assets are AAPL vs USD</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public static IReadOnlyList&lt;AssetPairInfo&gt; GetInstrumentAssets(this IInstrumentServiceProvider me, IEnumerable&lt;Instrument&gt; instruments)</code></pre>
  </div>

  <h4 class="section">Parameters</h4>
  <dl class="parameters">
    <dt><code>me</code> <a class="xref" href="FinSysPlatform.Domain.Market.Providers.IInstrumentServiceProvider.html">IInstrumentServiceProvider</a></dt>
    <dd></dd>
    <dt><code>instruments</code> <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.collections.generic.ienumerable-1">IEnumerable</a>&lt;<a class="xref" href="FinSysPlatform.Domain.Market.Instrument.html">Instrument</a>&gt;</dt>
    <dd></dd>
  </dl>

  <h4 class="section">Returns</h4>
  <dl class="parameters">
    <dt><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.collections.generic.ireadonlylist-1">IReadOnlyList</a>&lt;<a class="xref" href="FinSysPlatform.Domain.Market.Misc.AssetPairInfo.html">AssetPairInfo</a>&gt;</dt>
    <dd><p>A list of instruments and associated assets. Only successful instruments are returned. So the result list may be less than input instrument list<code class="paramref">instruments</code></p>
</dd>
  </dl>







  <h4 class="section" id="FinSysPlatform_Domain_Market_Providers_IInstrumentServiceProviderExtensions_GetInstrumentAssets_FinSysPlatform_Domain_Market_Providers_IInstrumentServiceProvider_System_Collections_Generic_IEnumerable_FinSysPlatform_Domain_Market_Instrument___remarks">Remarks</h4>
  <div class="markdown level1 remarks"><p>This method supports multiple instruments in one query for optimization purposes: if a provider needs to send the request to server, it is better to do once, for all instruments needed
Try to organize your code in a manner to query the assets for a bunch of instruments instead getting it one by one</p>
</div>




  <a id="FinSysPlatform_Domain_Market_Providers_IInstrumentServiceProviderExtensions_GetSortedLocalInstruments_" data-uid="FinSysPlatform.Domain.Market.Providers.IInstrumentServiceProviderExtensions.GetSortedLocalInstruments*"></a>

  <h3 id="FinSysPlatform_Domain_Market_Providers_IInstrumentServiceProviderExtensions_GetSortedLocalInstruments_FinSysPlatform_Domain_Market_Providers_IInstrumentServiceProvider_" data-uid="FinSysPlatform.Domain.Market.Providers.IInstrumentServiceProviderExtensions.GetSortedLocalInstruments(FinSysPlatform.Domain.Market.Providers.IInstrumentServiceProvider)">
  GetSortedLocalInstruments(IInstrumentServiceProvider)
  <a class="header-action link-secondary" title="View source" href="https://bitbucket.org/fintechnology/finalgo-charts/src/development/src/FinSysPlatform.Domain.Market/Providers/IInstrumentServiceProviderExtensions.cs#lines-27"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Same to <a class="xref" href="FinSysPlatform.Domain.Market.Providers.IInstrumentServiceProvider.html#FinSysPlatform_Domain_Market_Providers_IInstrumentServiceProvider_LocalInstruments">LocalInstruments</a> but additionally sorts instruments</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public static IReadOnlyList&lt;LocalInstrument&gt; GetSortedLocalInstruments(this IInstrumentServiceProvider me)</code></pre>
  </div>

  <h4 class="section">Parameters</h4>
  <dl class="parameters">
    <dt><code>me</code> <a class="xref" href="FinSysPlatform.Domain.Market.Providers.IInstrumentServiceProvider.html">IInstrumentServiceProvider</a></dt>
    <dd></dd>
  </dl>

  <h4 class="section">Returns</h4>
  <dl class="parameters">
    <dt><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.collections.generic.ireadonlylist-1">IReadOnlyList</a>&lt;<a class="xref" href="FinSysPlatform.Domain.Market.LocalInstrument.html">LocalInstrument</a>&gt;</dt>
    <dd></dd>
  </dl>











  <a id="FinSysPlatform_Domain_Market_Providers_IInstrumentServiceProviderExtensions_TryLoadInstrumentFromServerAsync_" data-uid="FinSysPlatform.Domain.Market.Providers.IInstrumentServiceProviderExtensions.TryLoadInstrumentFromServerAsync*"></a>

  <h3 id="FinSysPlatform_Domain_Market_Providers_IInstrumentServiceProviderExtensions_TryLoadInstrumentFromServerAsync_FinSysPlatform_Domain_Market_Providers_IInstrumentServiceProvider_FinSysPlatform_Domain_Market_Instrument_" data-uid="FinSysPlatform.Domain.Market.Providers.IInstrumentServiceProviderExtensions.TryLoadInstrumentFromServerAsync(FinSysPlatform.Domain.Market.Providers.IInstrumentServiceProvider,FinSysPlatform.Domain.Market.Instrument)">
  TryLoadInstrumentFromServerAsync(IInstrumentServiceProvider, Instrument)
  <a class="header-action link-secondary" title="View source" href="https://bitbucket.org/fintechnology/finalgo-charts/src/development/src/FinSysPlatform.Domain.Market/Providers/IInstrumentServiceProviderExtensions.cs#lines-20"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>A wrapper for <a class="xref" href="FinSysPlatform.Domain.Market.Providers.IInstrumentServiceProvider.html#FinSysPlatform_Domain_Market_Providers_IInstrumentServiceProvider_TryLoadInstrumentFromServerAsync_FinSysPlatform_Domain_Market_InstrumentKey_System_Boolean_">TryLoadInstrumentFromServerAsync(InstrumentKey, bool)</a></p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public static Task&lt;IServerInstrument?&gt; TryLoadInstrumentFromServerAsync(this IInstrumentServiceProvider me, Instrument instrument)</code></pre>
  </div>

  <h4 class="section">Parameters</h4>
  <dl class="parameters">
    <dt><code>me</code> <a class="xref" href="FinSysPlatform.Domain.Market.Providers.IInstrumentServiceProvider.html">IInstrumentServiceProvider</a></dt>
    <dd></dd>
    <dt><code>instrument</code> <a class="xref" href="FinSysPlatform.Domain.Market.Instrument.html">Instrument</a></dt>
    <dd></dd>
  </dl>

  <h4 class="section">Returns</h4>
  <dl class="parameters">
    <dt><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.threading.tasks.task-1">Task</a>&lt;<a class="xref" href="FinSysPlatform.Domain.Market.Providers.IServerInstrument.html">IServerInstrument</a>&gt;</dt>
    <dd></dd>
  </dl>












</article>

        <div class="contribution d-print-none">
          <a href="https://bitbucket.org/fintechnology/finalgo-charts/src/development/src/FinSysPlatform.Domain.Market/Providers/IInstrumentServiceProviderExtensions.cs#lines-15" class="edit-link">Edit this page</a>
        </div>


      </div>

      <div class="affix">
        <nav id="affix"></nav>
      </div>
    </main>

    <div class="container-xxl search-results" id="search-results"></div>

    <footer class="border-top text-secondary">
      <div class="container-xxl">
        <div class="flex-fill">
          <span>Made with <a href="https://dotnet.github.io/docfx">docfx</a></span>
        </div>
      </div>
    </footer>
  </body>
</html>
